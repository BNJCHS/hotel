{% extends "administracion/base_admin.html" %}
{% block title %}Tipos de Habitaciones{% endblock %}
{% block content %}
<div class="d-flex justify-content-between align-items-center mb-3">
  <h2 class="mb-0">Gestión de Tipos de Habitaciones</h2>
  {% if permisos.habitaciones.crear %}
  <a href="{% url 'habitaciones:habitaciones_create' %}" class="btn btn-success">Nuevo tipo</a>
  {% endif %}
  </div>

<div class="table-responsive">
  <table class="table table-striped align-middle">
    <thead>
      <tr>
        <th>Tipo</th>
        <th>Imagen</th>
        <th>Precio</th>
        <th>Capacidad</th>
        <th>Stock</th>
        <th>Estado</th>
        <th class="text-end">Acciones</th>
      </tr>
    </thead>
    <tbody>
      {% for t in tipos %}
      <tr>
        <td><strong>{{ t.nombre|title }}</strong></td>
        <td style="width:120px">
          {% if t.imagen %}
            <img src="{{ t.imagen.url }}" alt="{{ t.nombre }}" class="img-thumbnail" style="max-height:70px; object-fit:cover;">
          {% else %}
            <span class="text-muted">Sin imagen</span>
          {% endif %}
        </td>
        <td>${{ t.precio }}</td>
        <td>{{ t.capacidad }}</td>
        <td>
          <span class="badge bg-info">{{ t.stock_disponible }}/{{ t.stock_total }}</span>
        </td>
        <td>
          {% if t.activo %}
            <span class="badge bg-success">Activo</span>
          {% else %}
            <span class="badge bg-secondary">Inactivo</span>
          {% endif %}
        </td>
        <td class="text-end">
          {% if permisos.habitaciones.editar %}
          <a href="{% url 'habitaciones:habitaciones_edit' t.id %}" class="btn btn-sm btn-warning">Editar</a>
          {% endif %}
          {% if permisos.habitaciones.eliminar %}
          <a href="{% url 'habitaciones:habitaciones_delete' t.id %}" class="btn btn-sm btn-danger">Eliminar</a>
          {% endif %}
        </td>
      </tr>
      {% empty %}
      <tr><td colspan="7" class="text-center text-muted">No hay tipos de habitación.</td></tr>
      {% endfor %}
    </tbody>
  </table>
</div>
{% endblock %}

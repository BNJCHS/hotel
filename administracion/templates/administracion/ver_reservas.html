{% extends 'administracion/base_admin.html' %}

{% block title %}Reservas{% endblock %}

{% block content %}
<h2 class="mb-4">Reservas del Hotel</h2>

<table class="table table-striped table-hover">
  <thead class="table-dark">
    <tr>
      <th>ID</th>
      <th>Huésped</th>
      <th>Habitación</th>
      <th>Plan</th>
      <th>Promoción</th>
      <th>Monto</th>
      <th>Fecha de Reserva</th>
      <th>Estado</th>
    </tr>
  </thead>
  <tbody>
    {% for reserva in reservas %}
    <tr>
      <td>{{ reserva.id }}</td>
      <td>{{ reserva.usuario.get_full_name }}</td>
      <td>{{ reserva.habitacion.numero }} - {{ reserva.habitacion.tipo|title }}</td>
      <td>
        {% if reserva.plan %}
          {{ reserva.plan.nombre }}
        {% else %}
          -
        {% endif %}
      </td>
      <td>
        {% if reserva.promocion %}
          {{ reserva.promocion.nombre }} ({{ reserva.promocion.descuento }}%)
        {% else %}
          -
        {% endif %}
      </td>
      <td>${{ reserva.monto }}</td>
      <td>{{ reserva.fecha_reserva|date:"d/m/Y H:i" }}</td>
      <td>
        {% if reserva.confirmada %}
          <span class="badge bg-success">Confirmada</span>
        {% else %}
          <span class="badge bg-warning">Pendiente</span>
        {% endif %}
      </td>
    </tr>
    {% empty %}
    <tr>
      <td colspan="8" class="text-center">No hay reservas registradas.</td>
    </tr>
    {% endfor %}
  </tbody>
</table>
{% endblock %}

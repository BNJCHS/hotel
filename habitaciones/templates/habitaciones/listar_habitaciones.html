{% extends 'base.html' %}
{% load static %}

{% block title %}Habitaciones - Hotel Elegante{% endblock %}

{% block content %}
<!-- Mejorado el header con mejor estructura y elementos visuales -->
<section class="rooms-hero">
    <div class="hero-bg"></div>
    <div class="hero-overlay"></div>
    <div class="hero-content">
        <div class="container">
            <div class="hero-grid">
                <div class="hero-left">
                    <span class="hero-subtitle">Tu estadía perfecta te espera</span>
                    <h1 class="hero-title">Elige tu habitación ideal</h1>
                    <p class="hero-lead">Comodidad, diseño y atención de primer nivel en cada detalle. Explora nuestros espacios y encuentra el lugar perfecto para tu descanso.</p>
                    <div class="hero-cta">
                        <a href="#filtros" class="btn-action btn-primary"><i class="fas fa-compass"></i> Explorar Habitaciones</a>
                        <a href="{% url 'habitaciones:list_habitaciones_reserva' %}" class="btn-action btn-outline"><i class="fas fa-star"></i> Ver todas</a>
                    </div>
                    <div class="hero-highlights">
                        <div class="highlight"><i class="fas fa-wifi"></i> WiFi Premium</div>
                        <div class="highlight"><i class="fas fa-spa"></i> Amenities Exclusivos</div>
                        <div class="highlight"><i class="fas fa-shield-alt"></i> Seguridad 24/7</div>
                    </div>
                </div>
                <div class="hero-right">
                    <div class="hero-card">
                        <div class="hero-card-img" style="background-image:url('{% static 'img/habitacion_pexels_1.jpg' %}')"></div>
                        <div class="hero-card-info">
                            <div class="hero-card-type">Suite de Lujo</div>
                            <div class="hero-card-meta"><i class="fas fa-users"></i> Hasta 4 huéspedes</div>
                            <div class="hero-card-price"><span>desde</span> <strong>$175</strong> <small>/noche</small></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>



<!-- Mejorado el grid de habitaciones con mejor diseño de cards -->
<section class="rooms-showcase">
    <div class="container">
        <div class="section-header">
            <h2>Habitaciones Disponibles</h2>
            <div class="section-divider"></div>
        </div>

        <!-- Filtros -->
        <a id="filtros"></a>
        <form method="get" class="filters-form" style="display:flex; gap:12px; align-items:end; flex-wrap:wrap; margin-bottom:16px">
            <div>
                <label for="tipo">Tipo</label>
                <select id="tipo" name="tipo" class="form-control">
                    <option value="">Todos</option>
                    {% for t in tipos %}
                        <option value="{{ t }}" {% if filtros.tipo == t %}selected{% endif %}>{{ t }}</option>
                    {% endfor %}
                </select>
            </div>
            <div>
                <label for="capacidad_min">Capacidad mínima</label>
                <input id="capacidad_min" name="capacidad_min" type="number" min="1" class="form-control" value="{{ filtros.capacidad_min }}">
            </div>
            <div>
                <label for="precio_min">Precio desde</label>
                <input id="precio_min" name="precio_min" type="number" step="0.01" min="0" class="form-control" value="{{ filtros.precio_min }}">
            </div>
            <div>
                <label for="precio_max">Precio hasta</label>
                <input id="precio_max" name="precio_max" type="number" step="0.01" min="0" class="form-control" value="{{ filtros.precio_max }}">
            </div>
            <div style="display:flex; gap:6px; align-items:center">
                <input id="solo_disponibles" name="solo_disponibles" type="checkbox" {% if filtros.solo_disponibles %}checked{% endif %}>
                <label for="solo_disponibles">Solo disponibles</label>
            </div>
            <div>
                <button type="submit" class="btn-action btn-primary"><i class="fas fa-filter"></i> Filtrar</button>
            </div>
        </form>
        
        {% for t in tipos_items %}
        <div class="room-card-enhanced" data-tipo="{{ t.nombre|lower }}" data-precio="{{ t.precio }}" data-capacidad="{{ t.capacidad }}">
            <div class="room-image-container">
                {% if t.imagen %}
                    <img src="{{ t.imagen.url }}" alt="{{ t.nombre|title }}" class="room-img">
                {% else %}
                    <img src="{% static 'img/habitacion_pexels_1.jpg' %}" alt="{{ t.nombre|title }}" class="room-img">
                {% endif %}
                <div class="room-badge">
                    <span class="room-number">Stock: {{ t.stock_disponible }}/{{ t.stock_total }}</span>
                </div>
            </div>
            
            <div class="room-details">
                <div class="room-title-section">
                    <div class="room-type-badge">{{ t.nombre|title }}</div>
                    <h3 class="room-title">Tipo de Habitación</h3>
                    <div class="room-capacity-info">
                        <i class="fas fa-users"></i>
                        <span>{{ t.capacidad }} {% if t.capacidad == 1 %}huésped{% else %}huéspedes{% endif %}</span>
                    </div>
                </div>
                
                <p class="room-description">{{ t.descripcion|default:"Habitación elegante con todas las comodidades modernas para una estancia perfecta en nuestro hotel de lujo." }}</p>
                
                <div class="room-amenities-grid">
                    <div class="amenity-item">
                        <i class="fas fa-wifi"></i>
                        <span>WiFi Gratis</span>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-tv"></i>
                        <span>Smart TV</span>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-snowflake"></i>
                        <span>Aire A/C</span>
                    </div>
                    <div class="amenity-item">
                        <i class="fas fa-bath"></i>
                        <span>Baño Privado</span>
                    </div>
                </div>
                
                <div class="room-footer">
                    <div class="price-section">
                        <span class="price-label">Desde</span>
                        <span class="room-price-new">${{ t.precio }}</span>
                        <span class="price-period">/noche</span>
                    </div>
                    <div class="room-actions-new">
                        <a href="{% url 'reservas:seleccionar_huespedes' %}" class="btn-action btn-primary">
                            <i class="fas fa-shopping-cart"></i>
                            Reservar
                        </a>
                        <a href="{% url 'habitaciones:detalle_tipo_publico' t.id %}" class="btn-action btn-outline">
                            <i class="fas fa-info-circle"></i>
                            Detalles
                        </a>
                    </div>
                </div>
            </div>
        </div>
        {% empty %}
        <div class="no-rooms-found">
            <div class="no-rooms-icon">
                <i class="fas fa-bed"></i>
            </div>
            <h3>No hay tipos de habitación disponibles</h3>
            <p>Por favor, intenta con otros filtros o vuelve más tarde.</p>
            <button class="btn-primary" id="reset-search">
                <i class="fas fa-refresh"></i> Reiniciar Búsqueda
            </button>
        </div>
        {% endfor %}
        </div>
    </div>
</section>
<style>
.rooms-hero{position:relative;padding:90px 0;color:#fff;overflow:hidden}
.hero-bg{position:absolute;inset:0;background:url('{% static 'images/hero-hotel.jpg' %}') center/cover no-repeat;transform:scale(1.05);filter:brightness(.8)}
.hero-overlay{position:absolute;inset:0;background:radial-gradient(1200px 600px at 10% 10%, rgba(212,175,55,.25), transparent 35%), linear-gradient(180deg,rgba(0,0,0,.35),rgba(0,0,0,.75))}
.hero-content{position:relative}
.hero-grid{display:grid;grid-template-columns:1.3fr .9fr;gap:24px;align-items:center}
.hero-subtitle{display:inline-block;color:#d4af37;font-weight:700;letter-spacing:.5px;margin-bottom:8px}
.hero-title{font-size:42px;line-height:1.15;margin:0 0 10px}
.hero-lead{max-width:640px;color:#eaeaea;margin-bottom:16px}
.hero-cta{display:flex;gap:10px;margin-bottom:16px}
.hero-highlights{display:flex;gap:12px;flex-wrap:wrap}
.hero-highlights .highlight{display:flex;align-items:center;gap:8px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);padding:8px 12px;border-radius:999px}
.hero-right{display:flex;justify-content:flex-end}
.hero-card{display:flex;gap:12px;background:rgba(255,255,255,.08);border:1px solid rgba(255,255,255,.12);backdrop-filter:blur(6px);border-radius:16px;padding:12px}
.hero-card-img{width:180px;height:120px;border-radius:12px;background-size:cover;background-position:center}
.hero-card-info{display:flex;flex-direction:column;justify-content:center}
.hero-card-type{font-weight:700}
.hero-card-meta{color:#ddd}
.hero-card-price span{color:#ddd}
@media (max-width:992px){.hero-grid{grid-template-columns:1fr;gap:18px}.hero-right{justify-content:flex-start}.hero-title{font-size:36px}}

.section-header{text-align:center;margin-bottom:24px}
.section-header h2{font-weight:700}
.section-divider{width:64px;height:3px;background:#d4af37;margin:12px auto;border-radius:2px}
.rooms-showcase .container{display:flex;flex-direction:column;gap:24px}
.room-card-enhanced{display:flex;flex-direction:row;border-radius:16px;overflow:hidden;background:#fff;box-shadow:0 10px 30px rgba(0,0,0,.12);transition:transform .25s ease,box-shadow .25s ease;min-height:220px}
.room-card-enhanced:hover{transform:translateY(-4px);box-shadow:0 18px 40px rgba(0,0,0,.18)}
.room-image-container{position:relative;flex:0 0 38%}
.room-img{width:100%;height:100%;min-height:220px;object-fit:cover}
.room-overlay-new{position:absolute;inset:0;background:linear-gradient(180deg,rgba(0,0,0,0) 40%,rgba(0,0,0,.55) 100%);opacity:0;transition:opacity .25s ease}
.room-card-enhanced:hover .room-overlay-new{opacity:1}
.overlay-content{position:absolute;bottom:16px;right:16px}
.btn-overlay{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:999px;background:#fff;color:#222;text-decoration:none;font-weight:600}
.room-badge{position:absolute;top:12px;left:12px;background:#fff;color:#222;padding:6px 10px;border-radius:999px;font-weight:600;box-shadow:0 4px 12px rgba(0,0,0,.12)}
.room-details{flex:1;display:flex;flex-direction:column;justify-content:space-between}
.room-title-section{padding:16px}
.room-title{margin:8px 0 6px}
.room-type-badge{display:inline-block;background:#f1f1f1;border-radius:999px;padding:6px 10px;font-weight:600;color:#333}
.room-description{color:#666;margin:0 16px}
.price-section{display:flex;align-items:baseline;gap:8px;margin:0 16px 12px}
.room-price-new{font-weight:700;color:#0d6efd}
.room-actions-new{display:flex;gap:10px;padding:0 16px 16px;justify-content:flex-end}
.btn-action{display:inline-flex;align-items:center;gap:8px;padding:10px 14px;border-radius:10px;text-decoration:none}
.btn-action.btn-primary{background:#0d6efd;color:#fff}
.btn-action.btn-outline{background:transparent;color:#0d6efd;border:1px solid #0d6efd}
.no-rooms-found{padding:32px;text-align:center}
@media (max-width:768px){
  .room-card-enhanced{flex-direction:column}
  .room-image-container{flex:0 0 auto}
  .room-img{height:220px}
  .room-actions-new{justify-content:flex-start}
}
</style>
{% endblock %}

